<!doctype html>
<html class="no-js" lang="" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/layout :: main-fragment(
                                                ~{:: title},
                                                ~{:: #css},
                                                ~{:: #header},
                                                ~{:: #main-content},
                                                ~{:: #footer},
                                                ~{:: #js}
                                                )}">

<head>

    <title>Book List</title>
    <th:block id="css">
        <link rel="stylesheet" th:href="@{/admin/css/vendors.css}">
        <link rel="stylesheet" th:href="@{/admin/css/main.css}">
        <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet"/>

    </th:block>
</head>
<body>

<div id="tg-wrapper" class="tg-wrapper tg-haslayout">
    <!--************************************
            Header Start
    *************************************-->
    <th:block id="header" th:replace="fragments/header :: header"></th:block>
    <!--************************************
            Header End
    *************************************-->
    <th:block id="main-content">
        <!--************************************
                Inner Banner Start
        *************************************-->
        <div class="tg-innerbanner tg-haslayout tg-parallax tg-bginnerbanner" data-z-index="-100"
             data-appear-top-offset="600" data-parallax="scroll"
             data-image-src="original/images/parallax/bgparallax-07.jpg">
            <div class="container">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                        <div class="tg-innerbannercontent">
                            <h1>Books</h1>
                            <ol class="tg-breadcrumb">
                                <li><a href="javascript:void(0);">Home</a></li>
                                <li class="tg-active">Books</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--************************************
                Inner Banner End
        *************************************-->
        <!--************************************
                Main Start
        *************************************-->
        <main id="tg-main" class="tg-main tg-haslayout">
            <!--************************************
                    News Grid Start
            *************************************-->
            <div class="tg-sectionspace tg-haslayout">
                <div class="container">
                    <div class="row">
                        <div id="tg-twocolumns" class="tg-twocolumns">
                            <div class="col-xs-12 col-sm-8 col-md-8 col-lg-9 pull-right">
                                <div id="tg-content" class="tg-content">
                                    <div class="tg-products">

                                        <div class="tg-productgrid">
                                            <div class="tg-refinesearch">
                                                <span id="showing-status"></span>
                                                <form class="tg-formtheme tg-formsortshoitems">
                                                    <fieldset>

                                                        <!--                                                        <div class="form-group">-->
                                                        <!--                                                            <label>sort by:</label>-->
                                                        <!--                                                            <span class="tg-select">-->
                                                        <!--																<select>-->
                                                        <!--																	<option>name</option>-->
                                                        <!--																	<option>name</option>-->
                                                        <!--																	<option>name</option>-->
                                                        <!--																</select>-->
                                                        <!--															</span>-->
                                                        <!--                                                        </div>-->
                                                        <div class="form-group">
                                                            <label>Show:</label>
                                                            <span class="tg-select">
																<select id="show-pagesize">
																	<option>4</option>
																	<option>8</option>
																	<option>16</option>
																	<option>20</option>
																</select>
															</span>
                                                        </div>
                                                    </fieldset>
                                                </form>
                                            </div>
                                            <div class="col-xs-6 col-sm-6 col-md-4 col-lg-3"
                                                 th:each="book:${bookSearchData.data}">
                                                <div class="item">
                                                    <div class="tg-postbook">
                                                        <figure class="tg-featureimg">
                                                            <div class="tg-bookimg">
                                                                <div class="tg-frontcover"><img
                                                                        th:src="${book.image}"
                                                                        alt="image description"></div>
                                                                <div class="tg-backcover"><img th:src="${book.image}"
                                                                                               alt="image description">
                                                                </div>
                                                            </div>
                                                            <a class="tg-btnaddtowishlist" href="javascript:void(0);">
                                                                <i class="icon-heart"></i>
                                                                <span>Like this book</span>
                                                            </a>
                                                        </figure>
                                                        <div class="tg-postbookcontent" style="min-height: 254px">
                                                            <ul class="tg-bookscategories"
                                                                th:with="categories=${book.categories}">
                                                                <li th:each="category:${categories}">
                                                                    <a href="javascript:void(0);"
                                                                       th:text="${category.name}">Adventure</a>
                                                                </li>
                                                            </ul>
                                                            <div class="tg-themetagbox"><span
                                                                    class="tg-themetag">Goodreads Choice Award</span>
                                                            </div>
                                                            <div class="tg-booktitle">
                                                                <h3><a th:href="@{/books/{bookId} (bookId=${book.id})}"
                                                                       th:text="${book.title}">Help Me Find My
                                                                    Stomach</a></h3>
                                                            </div>
                                                            <span class="tg-bookwriter">By: <a
                                                                    href="javascript:void(0);"
                                                                    th:text="${book.author}">Angela Gunning</a></span>

                                                            <span class="tg-bookprice">
                                                                <span th:text="${book.rating}"
                                                                      style="font-weight: bolder">$25.18</span>
                                                                <span> - 688k</span>
                                                            </span>
                                                            <span class="tg-stars"
                                                                  th:value="${book.rating}"><span></span></span>

                                                            <th:block
                                                                    th:replace="fragments/reading-book :: readingBook(${book.readingStatus},${book.id})">
                                                            </th:block>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div id="pagination-user" class="form-group">
                                            <th:block
                                                    th:replace="fragments/paginationUser::pagination(${currentPage},${bookSearchData})"></th:block>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-xs-12 col-sm-4 col-md-4 col-lg-3 pull-left">
                                <th:block id="tg-sidebar" th:replace="fragments/sidebar :: sidebar"></th:block>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--************************************
                    News Grid End
            *************************************-->
        </main>
        <!--************************************
                Main End
        *************************************-->
    </th:block>

    <!--************************************
            Footer Start
    *************************************-->
    <th:block id="footer" th:replace="fragments/footer :: footer"></th:block>

    <!--************************************
            Footer End
    *************************************-->
</div>
<!--************************************
        Wrapper End
*************************************-->
<th:block id="js">
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <script th:inline="javascript">
        let bookSearchData = [[${bookSearchData}]]
        let currentPage = [[${currentPage}]]
        $('#pageInput').select2({});

        // Showing book status
        let minBookInPage = ((currentPage - 1) * showPageSize) + 1;
        let maxBookInPage = currentPage * (showPageSize);
        if (maxBookInPage > bookSearchData.totalResult) {
            maxBookInPage = bookSearchData.totalResult;
        }
        let htmlShowingItem = `showing ${minBookInPage} to ${maxBookInPage} of <b>${bookSearchData.totalResult}</b> total`
        $('#showing-status').html(htmlShowingItem)
    </script>
</th:block>
</body>

</html>